# 드랍/메획 아이템 손익분기 계산기 요구사항 명세서

## 1. 개요

### 1.1 문제 정의
메이플스토리에서 드랍률/메소획득량 아이템은 매우 고가이며, 구매 시 투자 비용을 회수하는데 필요한 사냥 시간을 계산하기 어렵다.

### 1.2 솔루션
아이템 구매 비용과 증가하는 시간당 수익을 기반으로 손익분기점을 계산하는 전용 계산기를 제공한다.

## 2. 기능 요구사항

### 2.1 데이터 입력
- **기본 계산기 연동**
  - BasicCalculator의 슬롯 1-3 데이터 불러오기
  - 불러온 데이터로 자동 계산
  - 수동 입력도 가능

- **아이템 관리**
  - 아이템 추가/제거 기능
  - 각 아이템별 설정:
    - 드랍률 증가 (줄 단위, 1줄 = 20%)
    - 메소획득량 증가 (줄 단위, 1줄 = 20%)
    - 한 아이템당 최대 3줄까지
  - 비용 정보:
    - 구매 비용 (억 메소 단위, 소수점 가능)
    - 판매 예상 비용 (억 메소 단위, 소수점 가능)
    - 경매장 수수료 (3% or 5% 선택)

- **사냥 설정**
  - 하루 사냥 소재 수 입력

### 2.2 계산 로직
- **제한사항 적용**
  - 드랍률: 잠재능력 최대 200% (10줄)
  - 메소획득량: 잠재능력 최대 100% (5줄)
  - 재물 획득의 비약은 메소획득량과 곱연산
  - 최대치 초과 시 경고 표시

- **손익분기 계산**
  - 각 아이템별 손익분기점
  - 전체 아이템 구매 시 총 손익분기점
  - 순 투자 비용 = 구매 비용 - 판매 비용 + (판매 비용 * 수수료율)

### 2.3 결과 표시
- **손익분기 정보**
  - "XXX소재 이상 시 손익분기 돌파"
  - 하루 N소재 기준 실제 기간:
    - "X일 (Y개월 Z주 W일)"
  
- **비교 테이블**
  - 각 아이템별 손익분기 소재 수
  - 증가하는 시간당 수익
  - 투자 대비 효율성

### 2.4 UI/UX
- **실시간 업데이트**
  - 토글로 on/off 가능
  - 기본 계산기와 동일한 방식

- **설정 저장**
  - 쿠키를 통한 설정 저장/불러오기
  - 아이템 목록 및 설정값 보존

## 3. 기술 요구사항

### 3.1 파일 구조
```
/src/app/calculators/breakeven/
├── page.tsx                    # 페이지 컴포넌트
/src/components/calculators/
├── BreakevenCalculator.tsx     # 메인 계산기 컴포넌트
/src/utils/
├── breakevenCalculations.ts    # 손익분기 계산 로직
```

### 3.2 수정 파일
- `/src/components/CalculatorGrid.tsx`: 새 계산기 추가
- `/src/utils/cookies.ts`: 새 계산기 설정 저장 지원 (필요시)

### 3.3 재사용 컴포넌트
- `NumberInput`: 숫자 입력
- `RadioGroup`: 수수료율 선택
- `ToggleButton`: 실시간 업데이트

### 3.4 데이터 구조
```typescript
interface BreakevenItem {
  id: string
  dropLines: number      // 0-3
  mesoLines: number      // 0-3
  purchasePrice: number  // 억 메소
  sellPrice: number      // 억 메소
  feeRate: 3 | 5        // %
}

interface BreakevenResult {
  itemId: string
  netCost: number              // 순 투자 비용
  breakEvenMaterials: number   // 손익분기 소재 수
  daysToBreakeven: number      // 일 수
  formattedPeriod: string      // "X개월 Y주 Z일"
}
```

## 4. 구현 우선순위

1. **Phase 1**: 기본 기능
   - 페이지 생성 및 라우팅 설정
   - 단일 아이템 손익분기 계산
   - BasicCalculator 데이터 불러오기

2. **Phase 2**: 다중 아이템 지원
   - 아이템 추가/제거 UI
   - 전체 손익분기 계산
   - 제한사항 경고

3. **Phase 3**: 고급 기능
   - 설정 저장/불러오기
   - 실시간 업데이트 토글
   - 상세 비교 테이블

## 5. 검증 기준

### 5.1 기능 검증
- [ ] BasicCalculator 슬롯 데이터 정상 불러오기
- [ ] 드랍률/메소획득량 제한 정상 적용
- [ ] 손익분기 계산 정확성
- [ ] 아이템 추가/제거 기능
- [ ] 설정 저장/불러오기

### 5.2 UI/UX 검증
- [ ] 반응형 디자인 (모바일/데스크톱)
- [ ] 직관적인 입력 인터페이스
- [ ] 명확한 결과 표시
- [ ] 경고 메시지 적절성

## 6. 가정사항
- 사냥 효율은 BasicCalculator의 설정값 기준
- 아이템 가격은 사용자가 직접 입력
- 하루 최대 사냥 시간은 사용자가 소재 수로 관리